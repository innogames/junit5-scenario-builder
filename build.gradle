plugins {
	id 'java-library'
	id 'maven-publish'
}

group 'com.innogames'
version '1.0-SNAPSHOT'

repositories {
	mavenCentral()
}

dependencies {
	def junitVersion = '5.8.1'

	compileOnly "org.junit.jupiter:junit-jupiter-api:$junitVersion"

	testImplementation "org.junit.jupiter:junit-jupiter-api:$junitVersion"
	testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:$junitVersion"
	testImplementation "org.mockito:mockito-core:4.0.0"
}

test {
	useJUnitPlatform()
}

java {
	withJavadocJar()
	withSourcesJar()
}

publishing {
	publications {
		mavenJava(MavenPublication) {
			from components.java

			pom {
				name = project.name
				description = 'Junit5 extension that introduces a Scenario Builder to your tests'
				url = 'https://github.com/innogames/junit5-scenario-builder'
				licenses {
					license {
						name = 'MIT License'
						url = 'https://opensource.org/licenses/MIT'
					}
				}
				developers {
					developer {
						name = 'Christian Blos'
						email = 'christian.blos@innogames.com'
						organization = 'InnoGames GmbH'
						organizationUrl = 'https://www.innogames.com/'
					}
				}
				scm {
					connection = 'scm:git:git://github.com/innogames/junit5-scenario-builder.git'
					developerConnection = 'scm:git:ssh://github.com:innogames/junit5-scenario-builder.git'
					url = 'https://github.com/innogames/junit5-scenario-builder'
				}
			}
		}
	}

	repositories {
		maven {
			def releasesRepoUrl = layout.buildDirectory.dir('repos/releases')
			def snapshotsRepoUrl = layout.buildDirectory.dir('repos/snapshots')
			url = version.endsWith('SNAPSHOT') ? snapshotsRepoUrl : releasesRepoUrl
		}
	}
}
